{"version":3,"sources":["../../src/pages/login-modal/login-modal.module.ts","../../src/pages/login-modal/login-modal.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { LoginModal } from './login-modal';\n\n@NgModule({\n  declarations: [\n    LoginModal,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginModal),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    LoginModal\n  ]\n})\nexport class LoginModalModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login-modal/login-modal.module.ts","import { Component } from '@angular/core';\nimport { Events, ViewController, LoadingController, IonicPage, ToastController } from 'ionic-angular';\nimport {WPlogin} from '../../providers/wplogin/wplogin';\nimport {Logins} from \"../../providers/logins/logins\";\nimport {FbConnectApp} from '../../providers/facebook/login-app';\nimport {FbConnectIframe} from '../../providers/facebook/login-iframe';\nimport {FBConnectAppSettings} from '../../providers/facebook/fbconnect-settings';\nimport {Storage} from '@ionic/storage';\nimport {Device} from '@ionic-native/device';\nimport {TranslateService} from '@ngx-translate/core';\nimport { LoginService } from '../../providers/logins/login.service';\n\n@IonicPage()\n@Component({\n  selector: 'page-login-modal',\n  templateUrl: 'login-modal.html'\n})\nexport class LoginModal {\n\n\tlogin:any = {}\n\tlogin_data: any\n\tspinner: any\n\tforce_login: any = false;\n\tis_preview: boolean = false;\n\tfb_login: boolean = false;\n\tfb_login_data: any\n\tregister_link: string = ''\n\n\tconstructor(\n\t\tpublic viewCtrl: ViewController,\n\t\tpublic loadingCtrl: LoadingController,\n\t\tpublic wplogin: WPlogin,\n\t\tprivate logins: Logins,\n\t\tpublic events: Events,\n\t\tpublic storage: Storage,\n\t\tpublic translate: TranslateService,\n\t\tprivate fbconnectApp: FbConnectApp,\n\t\tprivate fbconnectvars: FBConnectAppSettings,\n\t\tprivate toastCtrl: ToastController,\n\t\tprivate loginservice: LoginService,\n\t\tprivate Device: Device\n\t\t) {\n\n\t\t// login through postmessage sets login_data this way\n\t\tevents.subscribe('modal:logindata', data => {\n\t      this.setLoginData(data);\n\t    });\n\n\t\t// get login data on first load\n\t\tthis.storage.get('user_login').then( data => {\n\n\t\t\tif(data) {\n\t\t\t  this.login_data = data\n\t\t\t}\n\n\t\t});\n\n\t\tthis.storage.get('force_login').then( data => {\n\t\t\tif(data) {\n\t\t\t\tthis.force_login = true;\n\t\t\t}\n\t\t})\n\n\t\tthis.storage.get('registration_url').then( data => {\n\n\t\t\tif(data) {\n\t\t\t\tthis.register_link = data;\n\t\t\t} else {\n\t\t\t\tthis.register_link = null\n\t\t\t}\n\t\t})\n\n\t\tthis.initFBLogin();\n\n\t\tthis.is_preview = (location.href.indexOf('myapppresser') > 0);\n\n\t}\n\n\t/**\n\t * The FB login button will only display after settings are received\n\t * \n\t * fb_login: true|false to show the button\n\t */\n\tinitFBLogin() {\n\t\tthis.fb_login = (this.fbconnectvars.get_nonce()) ? true : false;\n\n\t\tif(this.fb_login === false) {\n\t\t\tsetTimeout(()=>{\n\n\t\t\t\tthis.fb_login = (this.fbconnectvars.get_nonce()) ? true : false;\n\n\t\t\t\tif(this.fb_login === false) {\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\n\t\t\t\t\t\tthis.fb_login = (this.fbconnectvars.get_nonce()) ? true : false;\n\t\t\t\t\t}, 5000); // iOS seems to take longer\n\t\t\t\t}\n\t\t\t}, 3000); // Slow on first app load\n\t\t}\n\t}\n\n\tdoLogin() {\n\n\t\t// if in preview, Device.platform is empty object. On device it should be string like 'iOS'\n\t\t// checking for port 8100 let's me test logins locally\n\t\tif( typeof this.Device.platform != 'string' && location.port != '8100') {\n\n\t\t\tthis.translate.get('Please try from a device.').subscribe( text => {\n\t\t\t\tthis.presentToast(text);\n\t\t\t})\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.translate.get('Please enter a valid login.').subscribe( text => {\n\t\t\tif( !this.login )\n\t\t\t\tthis.presentToast(text);\n\t\t})\n\n\t\tthis.showSpinner()\n\n\t\tthis.wplogin.login( this.login ).then( response => {\n\n\t\t\tif( !response || (<any>response).success === false ) {\n\t\t\t\tthis.loginErr( response )\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet login_data = (<any>response).data;\n\t\t\tif(login_data && login_data.avatar)\n\t\t\t\tlogin_data.avatar = this.logins.fixProtocolRelativeUrl(login_data.avatar);\n\n\t\t\tthis.storage.set( 'user_login', login_data )\n\t\t\tthis.events.publish('user:login', login_data )\n\t\t\tthis.login_data = login_data\n\t\t\tthis.dismiss()\n\n\t\t\tthis.hideSpinner()\n\n\t\t}, (err) => {\n\n\t\t\tthis.loginErr(err)\n\n\t\t}).catch( e => {\n\t\t\tconsole.warn(e)\n\t\t\tthis.hideSpinner()\n\t\t\tthis.translate.get('There was a problem connecting to the server.').subscribe( text => {\n\t\t\t\tthis.presentToast(text);\n\t\t\t});\n\t\t})\n\t}\n\n\tloginErr( err ) {\n\n\t\tconsole.log(err)\n\n\t\tthis.hideSpinner()\n\n\t\tthis.translate.get('There was a problem, please try again.').subscribe( text => {\n\t\t\tlet msg = text;\n\n\t\t\tif( err.data && err.data.message )\n\t\t\t\tmsg += ' ' + err.data.message\n\n\t\t\tthis.presentToast(msg);\n\t\t});\n\n\t}\n\n\tdoFBLogin() {\n\n\t\tif( typeof this.Device.platform != 'string' && location.port != '8100') {\n\t\t\t\n\t\t\tthis.translate.get('Please try from a device.').subscribe( text => {\n\t\t\t\tthis.presentToast(text);\n\t\t\t})\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.events.subscribe('fb:login', data => {\n\t\t\tconsole.log('captured fb login event', data);\n\t\t\tthis.dismiss();\n\t\t\tif(data.redirect_url)\n\t\t\t\tthis.events.publish('user:login_redirect', data.redirect_url);\n\t\t});\n\t\tthis.fbconnectApp.login();\n\t}\n\n\tdoLogout() {\n\n\t\tthis.showSpinner();\n\n\t\tthis.fbconnectvars.loggout();\n\t\tthis.loginservice.removeLoginStatus();\n\n\t\tthis.wplogin.logout().then( response => {\n\n\t\t\tthis.storage.remove( 'user_login' )\n\t\t\tthis.events.publish('user:logout', response )\n\t\t\tthis.login_data = null\n\t\t\tthis.dismiss()\n\t\t\tthis.hideSpinner()\n\n\t\t}, (err) => {\n\n\t\t\tthis.storage.remove( 'user_login' )\n\t\t\tthis.events.publish('user:logout' )\n\t\t\tthis.login_data = null\n\t\t\tthis.hideSpinner()\n\n\t\t\tconsole.log(err)\n\n\t\t\tthis.translate.get('You are logged out of the app, but there was a problem on the server.').subscribe( text => {\n\t\t\t\tlet msg = text;\n\n\t\t\t\tif( err.data && err.data.message )\n\t\t\t\t\tmsg += ' ' + err.data.message\n\n\t\t\t\tthis.presentToast(msg);\n\t\t\t})\n\t\t}).catch( e => {\n\t\t\tconsole.warn(e)\n\t\t\tthis.hideSpinner()\n\t\t\tthis.translate.get('There was a problem connecting to the server.').subscribe( text => {\n\t\t\t\tthis.presentToast(text);\n\t\t\t})\n\t\t})\n\n\t}\n\n\tsetLoginData( data ) {\n\t\tthis.login_data = data\n\t\tconsole.log('setLoginData', this.login_data)\n\t}\n\n\tregister( e ) {\n\n\t\tlet title = e.target.innerText\n\n\t\tthis.dismiss()\n\n\t\tthis.events.publish('pushpage', { url: this.register_link, title: title, is_register_page: true } )\n\n\t}\n\n\tlostpw( e ) {\n\n\t\tlet title = e.target.innerText\n\n\t\tthis.dismiss()\n\n\t\tlet item = window.localStorage.getItem( 'myappp' );\n    \tlet url = JSON.parse( item ).wordpress_url;\n\n\t\tthis.events.publish('pushpage', { url: url + 'wp-login.php?action=lostpassword', title: title } )\n\t}\n\n\tdismiss() {\n\t\tthis.viewCtrl.dismiss();\n\t}\n\n\tshowSpinner() {\n\t\tthis.spinner = this.loadingCtrl.create();\n\n\t\tthis.spinner.present();\n\t}\n\n\thideSpinner() {\n\t\tthis.spinner.dismiss();\n\t}\n\n\tpresentToast(msg) {\n\n\t    let toast = this.toastCtrl.create({\n\t      message: msg,\n\t      duration: 5000,\n\t      position: 'bottom'\n\t    });\n\n\t    toast.present();\n\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login-modal/login-modal.ts"],"sourceRoot":""}